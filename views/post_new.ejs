<% const renderBody = () => { %>
  <section class="form-shell">
    <h2>새 판매글 작성</h2>
    <form action="/posts?user=<%= currentUserId %>" method="POST" enctype="multipart/form-data" id="postForm">
      <input type="hidden" name="sellerId" value="<%= currentUserId %>" />
      <div class="form-field">
        <label for="image">상품 사진</label>
        <input type="file" id="image" name="image" accept="image/*" />
        <small>사진을 선택하면 AI 도움 모달이 나타납니다.</small>
      </div>
      <div class="form-field">
        <label for="title">제목</label>
        <input type="text" id="title" name="title" required />
      </div>
      <div class="form-field">
        <label for="price">가격 (원)</label>
        <input type="number" id="price" name="price" min="0" required />
      </div>
      <div class="form-field">
        <label for="location">거래 지역</label>
        <input type="text" id="location" name="location" value="<%= defaultLocation %>" />
      </div>
      <div class="form-field">
        <label for="description">상세 설명</label>
        <textarea id="description" name="description" rows="6" placeholder="상품 상태, 사용기간 등을 적어주세요."></textarea>
      </div>
      <div class="form-actions">
        <a class="btn secondary" href="/?user=<%= currentUserId %>">목록으로</a>
        <button type="submit" class="btn primary">등록하기</button>
      </div>
    </form>
  </section>

  <div class="modal" id="aiModal">
    <div class="modal__content">
      <h3>AI에게 판매글 작성을 맡길까요?</h3>
      <p>이미지와 입력 정보를 바탕으로 기본 설명을 자동으로 채워드립니다.</p>
      <div class="modal__actions">
        <button class="btn secondary" data-action="close">직접 작성할게요</button>
        <button class="btn primary" data-action="generate">AI로 작성</button>
      </div>
    </div>
  </div>
  
<div id="loadingOverlay" class="loading-overlay">
  <div class="spinner">AI가 글을 작성 중입니다...</div>
</div>
<% } %>

<%- include("layout", {
  renderBody,
  pageTitle: "판매글 작성"
}) %>



